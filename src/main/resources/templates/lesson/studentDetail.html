<!DOCTYPE html>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:th="http://www.thymeleaf.org" xmlns="http://www.w3.org/1999/html">
<head th:replace="/layout/basic :: head"></head>
<body>
<!-- warpper start -->
<div class="wrapper">
    <div th:replace="/layout/basic :: sidebar"></div>

    <!-- content start -->
    <div class="content">
        <div th:replace="/layout/basic :: navbar"></div>

        <div class="inner-content" style="margin: 2vw 0 0 6vh; max-width: 80%">

            <h3 style="display: inline-flex"> [[${student.name}]] </h3>
            <button style="display: inline-flex" class="btn btn-primary float-end">상담내역</button>
            <button style="display: inline-flex; margin-right: 10px" class="btn btn-primary float-end">사전평가결과지</button>

            <hr>
            <br>

            <!-- 본문 -->
            <div th:each="student : ${student}">
                <input type="hidden" class="studentIdx" th:value="${student.idx}">
                <input type="hidden" class="lessonIdx" th:value="${student.lesson.idx}">
                <div style="display: inline-flex">
                    <img th:src="${'/images/' + student.fileName}" alt=""
                         style="width: 150px; height: 180px; margin-right: 40px">
                    <div style="line-height: 90%"> <!-- 이미지랑 텍스트로 두 칸 -->
                        <br>
                        <div> <!-- 이름이랑 값으로 두칸 -->
                            <h5 style="margin-right: 50px">이름&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[[${student.name}]]</h5>
                        </div>
                        <br>
                        <div>
                            <h5 style="margin-right: 20px">생년월일&nbsp;&nbsp;&nbsp;&nbsp;[[${student.birthday}]]</h5>
                        </div>
                        <br>
                        <div>
                            <h5 style="margin-right: 20px">전화번호&nbsp;&nbsp;&nbsp;&nbsp;[[${student.phone}]]</h5>
                        </div>
                        <br>
                        <div>
                            <h5 style="margin-right: 35px">이메일&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[[${student.email}]]</h5>
                        </div>
                    </div>
                </div>
                <br>
                <br>
                <hr>
                <div>
                    <table style="width: 100% ;font-size: large; font-weight: bold; line-height: 250%">
                        <tr>
                            <td style="width: 15%; text-align: left">유형</td>
                            <td style="text-align: left" th:text="${student.lesson.curriculum.category.name}"></td>
                        </tr>
                        <tr>
                            <td colspan="2">
                                <hr>
                            </td> <!-- 가로선 추가 -->
                        </tr>
                        <tr>
                            <td style="width: 15%; text-align: left">과정</td>
                            <td style="text-align: left" th:text="${student.lesson.curriculum.name}"></td>
                        </tr>
                        <tr>
                            <td colspan="2">
                                <hr>
                            </td> <!-- 가로선 추가 -->
                        </tr>
                        <tr>
                            <td style="width: 15%; text-align: left">기수</td>
                            <td style="text-align: left" th:text="${student.lesson.number}"></td>
                        </tr>
                        <tr>
                            <td colspan="2">
                                <hr>
                            </td> <!-- 가로선 추가 -->
                        </tr>
                        <tr>
                            <td style="width: 15%; text-align: left">담당교사</td>
                            <td style="text-align: left" th:text="${student.lesson.member.name}"></td>
                        </tr>
                        <tr>
                            <td colspan="2">
                                <hr>
                            </td> <!-- 가로선 추가 -->
                        </tr>
                        <tr>
                            <td style="width: 15%; text-align: left">수료여부</td>
                            <td style="text-align: left" th:text="${student.done}"></td>
                        </tr>
                        <tr>
                            <td colspan="2">
                                <hr>
                            </td> <!-- 가로선 추가 -->
                        </tr>
                        <tr>
                            <td style="width: 15%; text-align: left">사전평가여부</td>
                            <td style="text-align: left" th:text="${student.pretest}"></td>
                        </tr>
                        <tr>
                            <td colspan="2">
                                <hr>
                            </td> <!-- 가로선 추가 -->
                        </tr>
                        <tr>
                            <td style="width: 15%; text-align: left">설문여부</td>
                            <td style="text-align: left" th:text="${student.survey}">
                                <span th:if="${student.survey == 'O'}"> 완료</span>
                                <span th:if="${student.survey == 'X'}"> 미완료 </span>
                                <span th:if="${student.survey == null}">미완료 </span>

                            </td>
                        </tr>
                        <tr>
                            <td colspan="2">
                                <hr>
                            </td> <!-- 가로선 추가 -->
                        </tr>
                        <tr>
                            <td style="width: 15%; text-align: left">상담여부</td>
                            <td style="text-align: left">
                                <span th:if="${student.counseling == null}"> 완료된 상담이 없습니다.</span>
                                <span th:if="${student.counseling == 1}"> 첫번째 상담 완료</span>
                                <span th:if="${student.counseling == 2}"> 두번째 상담 완료</span>
                                <span th:if="${student.counseling == 3}"> 세번째 상담 완료</span>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="2">
                                <hr>
                            </td> <!-- 가로선 추가 -->
                        </tr>
                        <tr>
                            <td style="width: 15%; text-align: left">과목평가여부</td>
                            <td>
                                <table>
                                    <tr th th:each="subjectTest:${subjectTest}">
                                        <td>[[${subjectTest.name}]]</td>
                                        <td>
                                            <span th:if="${subjectTest.state == 'X'}"> X </span>
                                            <span th:if="${subjectTest.state == 'O'}"> O </span>
                                        </td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                    </table>
                </div>

            </div>

            <br>

            <div class="float-end" style="display: inline-flex">
                <button style="display: inline-flex; margin-right: 10px" class="btn btn-outline-primary"
                        th:idx="${student.idx}" th:onclick="updateBtn(this.getAttribute('idx'))">수정
                </button>
                <button style="display: inline-flex" class="btn btn-outline-dark backList">학생전체목록</button>
            </div>

            <!-- 수정 모달 -->
            <div class="modal updatModal" tabindex="-1">
                <div class="modal-dialog">
                    <div class="modal-content">

                    </div>
                </div>
            </div>


        </div> <!-- inner content end -->
    </div> <!-- content end -->
    <a th:replace="/layout/basic :: back-to-top"></a>
</div>
<!-- wrapper end-->


<div th:replace="/layout/basic :: scriptSet">
</div>

</body>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script src="/js/training.js"></script>
<script layout:fragment="script" th:inline="javascript">

    const lessonIdx = document.querySelector(".lessonIdx")
    document.querySelector(".backList").addEventListener("click", function (e) {
        const idx = lessonIdx.value
        window.location.href = '/lesson/studentList?idx=' + idx;
    })

</script>
</html>